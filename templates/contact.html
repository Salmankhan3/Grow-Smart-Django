{%load static%}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Contact Us</title>
  <link rel="stylesheet" href="{%static 'contact.css'%}">
</head>
<body>
  <div class="contact-container">
    <h2>Contact Us</h2>
    {% if messages %}
  <ul class="messages">
    {% for message in messages %}
      <li class="alert alert-{{ message.tags }}">{{ message }}</li>
    {% endfor %}
  </ul>
{% endif %}
    <form id="contactForm" name='contactform' method='POST' actiom='{% url 'contact' %}'>
      {% csrf_token %}
      <div class="form-group">
        <label for="name">Your Name</label>
        <input type="text" id="name" name='name' required />
        <small class="error-message"></small>
      </div>
      <div class="form-group">
        <label for="email">Your Email</label>
        <input type="email" id="email" name='email' required />
        <small class="error-message"></small>
      </div>
      <div class="form-group">
        <label for="message">Your Message</label>
        <textarea id="message" name='message' required>  </textarea>
        <small class="error-message"></small>
      </div>
      <button type="submit" class="submit-btn">Send Message</button>
      <div class="message" id="formMessage"></div>
    </form>
  </div>

  <script>
    document.getElementById("contactForm").addEventListener("submit", function (e) {
  e.preventDefault();

  const nameInput = document.getElementById("name");
  const emailInput = document.getElementById("email");
  const messageInput = document.getElementById("message");
  const formMessage = document.getElementById("formMessage");

  let hasError = false;

  // Reset errors
  document.querySelectorAll(".error-message").forEach(el => el.style.display = "none");

  if (nameInput.value.trim() === "") {
    showError(nameInput, "Name is required.");
    hasError = true;
  }

  if (!isValidEmail(emailInput.value.trim())) {
    showError(emailInput, "Enter a valid email.");
    hasError = true;
  }

  if (messageInput.value.trim() === "") {
    showError(messageInput, "Message cannot be empty.");
    hasError = true;
  }

  if (hasError) return;

  formMessage.innerText = "Thank you! Your message has been sent.";
  formMessage.style.color = "green";

  // Clear form
  document.getElementById("contactForm").reset();
});

function showError(input, message) {
  const errorElement = input.nextElementSibling;
  errorElement.textContent = message;
  errorElement.style.display = "block";
}

function isValidEmail(email) {
  return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
}
  </script>
</body>
</html>
